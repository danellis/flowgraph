<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
    <link rel="stylesheet" href="./css/nodes.css">
  </head>
  <body>
  <svg id="workspace" width="500" height="500">
    <g v-for="node in nodes">
      <g v-for="start in node.properties">
        <path v-for="end in start.outgoing" class="node-connector" :d="start.connectionPath(end)"></path>
      </g>
    </g>
    <g v-for="node in nodes" :class="'node ' + node.cls">
      <rect class="node-bg" rx="15" ry="15" :x="node.x" :y="node.y" :width="node.width" :height="node.height"></rect>
      <path class="node-header" :d="headerPath(node)"></path>
      <text class="node-title" :x="node.x + 15" :y="node.y + 20" :clip-path="headerClip(node)">{{node.title}}</text>
      <rect class="node-outline" rx="15" ry="15" :x="node.x" :y="node.y" :width="node.width" :height="node.height"></rect>
      <g v-for="prop in node.properties">
        <circle v-if="prop.hasInlet" class="node-inlet" r="5" :cx="prop.inletX" :cy="prop.y"></circle>
        <circle v-if="prop.hasOutlet" class="node-outlet" r="5" :cx="prop.outletX" :cy="prop.y"></circle>
        <text class="property-text" :x="prop.textX" :y="prop.textY" :text-anchor="prop.anchor">{{prop.text}}</text>
      </g>
    </g>
  </svg>

  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="./assets/bundle.js"></script>
  </body>
</html>
